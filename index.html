<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Formulaire ASA</title>
</head>
<body>
  <h2>Formulaire d'inscription ASA</h2>
  <form id="asaForm">
    <label>Prénom : <input type="text" name="prenom" required></label><br><br>
    <label>Nom : <input type="text" name="nom" required></label><br><br>
    <label>Téléphone WhatsApp : <input type="tel" name="telephone" required></label><br><br>
    <label>Email (facultatif) : <input type="email" name="email"></label><br><br>
    <label>Justificatif de résidence : <input type="file" name="justificatif" accept=".pdf,.jpg,.jpeg,.png,.doc,.docx" required></label><br><br>
    <label>Commentaires (facultatif) : <br>
      <textarea name="commentaires" rows="4" cols="40"></textarea>
    </label><br><br>
    <label>
      <input type="checkbox" name="consentement" value="Oui" required>
      J’ai pris connaissance des conditions de traitement de mes données personnelles et j’y consens.
    </label><br><br>

    <button type="submit">Envoyer</button>
  </form>

  <div id="confirmation" style="display:none; margin-top:20px;">
    <p>Merci pour votre inscription ! Vos informations ont été enregistrées avec succès. Vous serez informé(e) des prochaines étapes liées à l'élection du bureau de l'Association.</p>
    <img src="https://res.cloudinary.com/dcjlu0ems/image/upload/v1737277427/logo_asa_2025.png" width="213" height="85" />
  </div>

  <script>
    const form = document.getElementById('asaForm');
    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(form);

      try {
        const response = await fetch('https://script.google.com/macros/s/AKfycbzr-0Z3vPAV14i3ICdt9ceHOZtO0-ilfWASiF5PN2n2BlKWFUCbQoK0-le8-yc3EYJJ/exec', {
          method: 'POST',
          body: formData,
        });

        const result = await response.json();
        if (result.success) {
          form.style.display = 'none';
          document.getElementById('confirmation').style.display = 'block';
        } else {
          alert("Erreur lors de l'envoi : " + result.message);
        }
      } catch (error) {
        alert("Erreur réseau ou de script");
      }
    });
  </script>
</body>
</html>
